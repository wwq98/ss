<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>预约审批</title>
        <meta content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0" name="viewport"/>
        <meta content="yes" name="apple-mobile-web-app-capable"/>
        <meta content="black" name="apple-mobile-web-app-status-bar-style"/>
        <meta content="telephone=no" name="format-detection"/>
        <link href="../myindex/css/style.css" rel="stylesheet" type="text/css"/>
        <script type="text/javascript" src="../myindex/js/jquery-1.js"></script>
        <script type="text/javascript" src="../myindex/js/tab.js"></script>

    </head>
    <body>

     

        <section class="aui-flexView">
            <header class="aui-navBar aui-navBar-fixed">
                <a href="javascript:window.history.back();" class="aui-navBar-item">
                    <i class="icon icon-return"></i> 预约审批
                </a>
                <div class="aui-center">
                    <span class="aui-center-title"></span>
                </div>
                <a href="javascript:;" class="aui-navBar-item">
                    <i class="icon icon-sx"></i>
                    <i class="icon icon-cd"></i>
                </a>
            </header>
            <section class="aui-scrollView">
                <div class="aui-packet-list">
                    <div class="aui-tab" data-ydui-tab>
                        <ul class="tab-nav">
                            <li class="tab-nav-item tab-active">
                                <a href="javascript:;">全部</a>
                            </li>
                            <li class="tab-nav-item">
                                <a href="javascript:;">待审批</a>
                            </li>
                            <li class="tab-nav-item">
                                <a href="javascript:;">通过</a>
                            </li>
                            <li class="tab-nav-item">
                                <a href="javascript:;">不通过</a>
                            </li>
                            <li class="tab-nav-item">
                                <a href="javascript:;">已取消</a>
                            </li>
                        </ul>
                        <div class="tab-panel">
                            <!--全部-->
                            <div class="tab-panel-item tab-active">
                                <div class="aui-order-title" id="all">
					
				    <div class="aui-order-box" id="app">
                                        <a href="./shenpijinzhan/liucheng.html" class="aui-well-item">
                                            <div class="aui-well-item-bd">
                                                <h3>申请人：王伟奇</h3>
                                            </div>
                                            <span class="aui-well-item-fr" style="color:#67C23A">审批通过</span>
                                        </a>
<!--                                         <p class="aui-order-fl aui-order-time">通行时间：2022-08-28 06:00:00--2022-09-04 23:59:59</p> -->
					<p class="aui-order-fl aui-order-time">通行时间：{{time.y}}-{{time.M}}-{#{time.day}-2} 07:13:53--{{time.y}}-{{time.M}}-{#{time.day}+5} 23:55:48</p> 
                                        <p class="aui-order-fl aui-order-address">外出原因：实习</p>
                                        <p class="aui-order-fl aui-order-door">目的地：光谷-[湖北省武汉市洪山区]</p>
                                        <p class="aui-order-fl aui-order-door">审批意见：</p>
                                    </div>
                                    
                                    <div class="aui-order-box">
                                        <a href="./shenpijinzhan/liucheng.html" class="aui-well-item">
                                            <div class="aui-well-item-bd">
                                                <h3>申请人：王伟奇</h3>
                                            </div>
                                            <span class="aui-well-item-fr" style="color:#67C23A">审批通过</span>
                                        </a>
                                        <p class="aui-order-fl aui-order-time">通行时间：2022-06-14 06:00:00--2022-06-25 23:59:59</p>
                                        <p class="aui-order-fl aui-order-address">外出原因：实习</p>
                                        <p class="aui-order-fl aui-order-door">目的地：光谷-[湖北省武汉市洪山区]</p>
                                        <p class="aui-order-fl aui-order-door">审批意见：</p>
                                    </div>
					
				    <div class="aui-order-box">
                                        <a href="./shenpijinzhan/liucheng.html" class="aui-well-item">
                                            <div class="aui-well-item-bd">
                                                <h3>申请人：王伟奇</h3>
                                            </div>
                                            <span class="aui-well-item-fr" style="color:#67C23A">审批通过</span>
                                        </a>
                                        <p class="aui-order-fl aui-order-time">通行时间：2022-05-04 06:47:20--2022-05-07 23:59:59</p>
                                        <p class="aui-order-fl aui-order-address">外出原因：实习</p>
                                        <p class="aui-order-fl aui-order-door">目的地：光谷-[湖北省武汉市洪山区]</p>
                                        <p class="aui-order-fl aui-order-door">审批意见：</p>
                                    </div>

					
					
                                </div>

                            </div>

                            <!--待审核-->
                            <div class="tab-panel-item">

                                <div class="aui-order-title" id="s1">

                                    <!--div class="aui-order-box">
                                        <a href="../liucheng/index.html" class="aui-well-item">
                                            <div class="aui-well-item-bd">
                                                <h3>申请人：李伟</h3>
                                            </div>
                                            <span class="aui-well-item-fr" style="color:#E6A23C">待审批</span>
                                        </a>
                                        <p class="aui-order-fl aui-order-time">通行时间：2022年3月12日19:00--2022年3月13日19:00</p>
                                        <p class="aui-order-fl aui-order-address">外出原因：医院看病</p>
                                        <p class="aui-order-fl aui-order-door">目的地：光谷同济医院</p>
                                    </div-->


                                </div>
                               
                            </div>

                            <!--通过-->
                            <div class="tab-panel-item">

                                <div class="aui-order-title" id="s2">
				    <div class="aui-order-box">
                                        <a href="./shenpijinzhan/liucheng.html" class="aui-well-item">
                                            <div class="aui-well-item-bd">
                                                <h3>申请人：王伟奇</h3>
                                            </div>
                                            <span class="aui-well-item-fr" style="color:#67C23A">审批通过</span>
                                        </a>
                                        <p class="aui-order-fl aui-order-time">通行时间：2022-06-27 06:00:00--2022-07-03 23:59:59</p>
                                        <p class="aui-order-fl aui-order-address">外出原因：实习</p>
                                        <p class="aui-order-fl aui-order-door">目的地：光谷-[湖北省武汉市洪山区]</p>
                                        <p class="aui-order-fl aui-order-door">审批意见：</p>
                                    </div>
				    <div class="aui-order-box">
                                        <a href="./shenpijinzhan/liucheng.html" class="aui-well-item">
                                            <div class="aui-well-item-bd">
                                                <h3>申请人：王伟奇</h3>
                                            </div>
                                            <span class="aui-well-item-fr" style="color:#67C23A">审批通过</span>
                                        </a>
                                        <p class="aui-order-fl aui-order-time">通行时间：2022-06-14 06:00:00--2022-06-25 23:59:59</p>
                                        <p class="aui-order-fl aui-order-address">外出原因：实习</p>
                                        <p class="aui-order-fl aui-order-door">目的地：光谷-[湖北省武汉市洪山区]</p>
                                        <p class="aui-order-fl aui-order-door">审批意见：</p>
                                    </div>
					
				    <div class="aui-order-box">
                                        <a href="./shenpijinzhan/liucheng.html" class="aui-well-item">
                                            <div class="aui-well-item-bd">
                                                <h3>申请人：王伟奇</h3>
                                            </div>
                                            <span class="aui-well-item-fr" style="color:#67C23A">审批通过</span>
                                        </a>
                                        <p class="aui-order-fl aui-order-time">通行时间：2022-05-04 06:47:20--2022-05-07 23:59:59</p>
                                        <p class="aui-order-fl aui-order-address">外出原因：实习</p>
                                        <p class="aui-order-fl aui-order-door">目的地：光谷-[湖北省武汉市洪山区]</p>
                                        <p class="aui-order-fl aui-order-door">审批意见：</p>
                                    </div>

                                </div>
                               
                            </div>

                            <!--不通过-->
                            <div class="tab-panel-item">

                                <div class="aui-order-title" id="s3">

                                    <!--div class="aui-order-box">
                                        <a href="../liucheng/index.html" class="aui-well-item">
                                            <div class="aui-well-item-bd">
                                                <h3>申请人：李伟</h3>
                                            </div>
                                            <span class="aui-well-item-fr" style="color:#F56C6C">不通过</span>
                                        </a>
                                        <p class="aui-order-fl aui-order-time">通行时间：2022年3月12日19:00--2022年3月13日19:00</p>
                                        <p class="aui-order-fl aui-order-address">外出原因：医院看病</p>
                                        <p class="aui-order-fl aui-order-door">目的地：光谷同济医院</p>
                                    </div-->


                                </div>
                               
                            </div>

                            <!--已取消-->
                            <div class="tab-panel-item">

                                <div class="aui-order-title" id="s4">

                                    <!--div class="aui-order-box">
                                        <a href="../liucheng/index.html" class="aui-well-item">
                                            <div class="aui-well-item-bd">
                                                <h3>申请人：李伟</h3>
                                            </div>
                                            <span class="aui-well-item-fr">已取消</span>
                                        </a>
                                        <p class="aui-order-fl aui-order-time">通行时间：2022年3月12日19:00--2022年3月13日19:00</p>
                                        <p class="aui-order-fl aui-order-address">外出原因：医院看病</p>
                                        <p class="aui-order-fl aui-order-door">目的地：光谷同济医院</p>
                                    </div-->


                                </div>
                               
                            </div>
                            
                        </div>
                    </div>

                </div>
            </section>
            <!--footer class="aui-footer aui-footer-fixed">
                <a href="javascript:;" class="aui-tabBar-item aui-tabBar-item-active">
                    <span class="aui-tabBar-item-text">预约申请</span>
                </a>
                <a href="javascript:;" class="aui-tabBar-item">
                    <span class="aui-tabBar-item-text">预约须知</span>
                </a>
            </footer-->
        </section>

    </body>
	
        <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
	<script>
		new Vue({
			el:'#app',
			data:{
				time:{
					y:2022,//年
					M:02,//月
					day:17,//日
					h:14,//时
					m:08,//分
					s:00,//秒
					week:'星期四'
				}
			},
			methods: {
				clock:function(){
					let oDate = new Date();
					this.time={
						y:oDate.getFullYear(),
						M:oDate.getMonth()+1,
						day:oDate.getDate(),
						h:oDate.getHours(),
						m:oDate.getMinutes(),
						s:oDate.getSeconds(),
						week:oDate.getDay(),
					}
					//月数据处理，个位数时补0
					if(parseInt(this.time.M)<10){
						this.time.M='0'+parseInt(this.time.M)
					}
					//日数据处理，个位数时补0
					if(parseInt(this.time.day)<10){
						this.time.day='0'+parseInt(this.time.day)
					}
					//时数据处理，个位数时补0
					if(parseInt(this.time.h)<10){
						this.time.h='0'+parseInt(this.time.h)
					}
					//分数据处理，个位数时补0
					if(parseInt(this.time.m)<10){
						this.time.m='0'+parseInt(this.time.m)
					}
					//秒数据处理，个位数时补0
					if(parseInt(this.time.s)<10){
						this.time.s='0'+parseInt(this.time.s)
					}
					//星期处理，展示星期几
					let week = parseInt(this.time.week)
					switch (week) {
						case 1:this.time.week='星期一' ;break;
						case 2:this.time.week='星期二' ;break;
						case 3:this.time.week='星期三' ;break;
						case 4:this.time.week='星期四' ;break;
						case 5:this.time.week='星期五' ;break;
						case 6:this.time.week='星期六' ;break;
						case 7:this.time.week='星期日' ;break;
					}
				}
			},
			beforeCreate:function(){
				console.log('创建前');
			},
			created:function(){
				console.log('创建后');
			},
			beforeMount:function(){
				console.log('挂载前');
			},
			mounted:function(){
				console.log('挂载后');
				setInterval(this.clock, 1000);//每隔一秒执行一次
				this.clock();//页面加载时候执行一次
			},
			beforeUpdate:function(){
				console.log('数据更新前');
			},
			updated:function(){
				console.log('数据更新后');
			},
			beforeDestroy:function(){
				console.log('销毁前');
			},
			destroyed:function(){
				console.log('销毁后');
			},
		})
	</script>
    <script>

		function ShowElement(element) {
			var oldhtml = element.innerHTML;
    
			var newobj = document.createElement('input');
    
			newobj.type = 'text';
    
			newobj.value = oldhtml;
    
			newobj.onblur = function() {
				element.innerHTML = this.value == oldhtml ? oldhtml : this.value;
     
			}
   
			element.innerHTML = '';
  
			element.appendChild(newobj);
    
			newobj.setSelectionRange(0, oldhtml.length);
  
			newobj.focus();
		}


        function changetab(index){

            console.log("修改tab的值"+index)
            if(index==0){

                    $.ajax({
                        type: "POST",
                        url: "http://xycrgl.cug.edu.cn/reserve.php/reserve/myindex?typee="+"all",
                        contentType: "application/json; charset=utf-8",

                        success: function(data){
                            console.log(data.rows);
                            var hhh="";
                            if(data.rows.length==0){

                            hhh= "<div style='width:100vw;margin-top:20vh;text-align:center;'>暂无申请</div>";

                            }
                            for(var i=0;i<data.rows.length;i++){

                                hhh = hhh +'<div class="aui-order-box">'+
                                    '<a href="http://xycrgl.cug.edu.cn/index/liucheng?zhaji='+data.rows[i].
XTBHtext+'" class="aui-well-item">'+
                                                        '<div class="aui-well-item-bd">'+
                                                        ' <h3>申请人：'+data.rows[i].nametext+'</h3>'+
                                                        '  </div>';
                                                        if(data.rows[i].verifier1text=="待审批"){
                                                            hhh = hhh +' <span class="aui-well-item-fr" style="color:#E6A23C">待审批</span>';
                                                        }
                                                        if(data.rows[i].verifier1text=="审批通过"){
                                                            hhh = hhh +'<span class="aui-well-item-fr" style="color:#67C23A">审批通过</span>';
                                                        }
                                                        if(data.rows[i].verifier1text=="不通过"){
                                                            hhh = hhh +' <span class="aui-well-item-fr" style="color:#F56C6C">不通过</span>';
                                                        }
                                                        if(data.rows[i].verifier1text=="已取消"){
                                                            hhh = hhh +' <span class="aui-well-item-fr">已取消</span>';
                                                        }


                                                        hhh = hhh + '   </a>'+
                                                        ' <p class="aui-order-fl aui-order-time">通行时间：'+data.rows[i].outtimetext  +'--'+data.rows[i].backtimetext+'</p>'+
                                                        '  <p class="aui-order-fl aui-order-address">外出原因：'+data.rows[i].reasontext  +'</p>'+
                                                        '   <p class="aui-order-fl aui-order-door">目的地：'+data.rows[i].destinationtext  +'</p>'+
                                                        '  </div>';
                            }
                            var all = document.getElementById("all");
                            all.innerHTML=hhh;
                        },

                        });

            }
            else if(index==1){

                $.ajax({
                        type: "POST",
                        url: "http://xycrgl.cug.edu.cn/reserve.php/reserve/myindex?typee="+"待审核",
                        contentType: "application/json; charset=utf-8",

                        success: function(data){
                            console.log(data.rows);
                            var hhh="";
                            if(data.rows.length==0){

                            hhh= "<div style='width:100vw;margin-top:20vh;text-align:center;'>暂无申请</div>";

                            }
                            for(var i=0;i<data.rows.length;i++){

                                hhh = hhh +'<div class="aui-order-box">'+
                                                    '<a href="http://xycrgl.cug.edu.cn/index/liucheng?zhaji='+data.rows[i].
XTBHtext+'" class="aui-well-item">'+
                                                        '<div class="aui-well-item-bd">'+
                                                        ' <h3>申请人：'+data.rows[i].nametext+'</h3>'+
                                                        '  </div>';
                                                        if(data.rows[i].verifier1text=="待审批"){
                                                            hhh = hhh +' <span class="aui-well-item-fr" style="color:#E6A23C">待审批</span>';
                                                        }
                                                        if(data.rows[i].verifier1text=="审批通过"){
                                                            hhh = hhh +'<span class="aui-well-item-fr" style="color:#67C23A">审批通过</span>';
                                                        }
                                                        if(data.rows[i].verifier1text=="不通过"){
                                                            hhh = hhh +' <span class="aui-well-item-fr" style="color:#F56C6C">不通过</span>';
                                                        }
                                                        if(data.rows[i].verifier1text=="已取消"){
                                                            hhh = hhh +' <span class="aui-well-item-fr">已取消</span>';
                                                        }


                                                        hhh = hhh + '   </a>'+
                                                        ' <p class="aui-order-fl aui-order-time">通行时间：'+data.rows[i].outtimetext  +'--'+data.rows[i].backtimetext+'</p>'+
                                                        '  <p class="aui-order-fl aui-order-address">外出原因：'+data.rows[i].reasontext  +'</p>'+
                                                        '   <p class="aui-order-fl aui-order-door">目的地：'+data.rows[i].destinationtext  +'</p>'+
                                                        '  </div>';
                            }
                            var s1 = document.getElementById("s1");
                            s1.innerHTML=hhh;
                        },

                        });



            }
            else if(index==2){

                $.ajax({
                        type: "POST",
                        url: "http://xycrgl.cug.edu.cn/reserve.php/reserve/myindex?typee="+"审核通过",
                        contentType: "application/json; charset=utf-8",

                        success: function(data){
                            console.log(data.rows);
                            var hhh="";
                            if(data.rows.length==0){

                            hhh= "<div style='width:100vw;margin-top:20vh;text-align:center;'>暂无申请</div>";

                            }
                            for(var i=0;i<data.rows.length;i++){

                                hhh = hhh +'<div class="aui-order-box">'+
                                    '<a href="http://xycrgl.cug.edu.cn/index/liucheng?zhaji='+data.rows[i].
XTBHtext+'" class="aui-well-item">'+
                                                        '<div class="aui-well-item-bd">'+
                                                        ' <h3>申请人：'+data.rows[i].nametext+'</h3>'+
                                                        '  </div>';
                                                        if(data.rows[i].verifier1text=="待审批"){
                                                            hhh = hhh +' <span class="aui-well-item-fr" style="color:#E6A23C">待审批</span>';
                                                        }
                                                        if(data.rows[i].verifier1text=="审批通过"){
                                                            hhh = hhh +'<span class="aui-well-item-fr" style="color:#67C23A">审批通过</span>';
                                                        }
                                                        if(data.rows[i].verifier1text=="不通过"){
                                                            hhh = hhh +' <span class="aui-well-item-fr" style="color:#F56C6C">不通过</span>';
                                                        }
                                                        if(data.rows[i].verifier1text=="已取消"){
                                                            hhh = hhh +' <span class="aui-well-item-fr">已取消</span>';
                                                        }


                                                        hhh = hhh + '   </a>'+
                                                        ' <p class="aui-order-fl aui-order-time">通行时间：'+data.rows[i].outtimetext  +'--'+data.rows[i].backtimetext+'</p>'+
                                                        '  <p class="aui-order-fl aui-order-address">外出原因：'+data.rows[i].reasontext  +'</p>'+
                                                        '   <p class="aui-order-fl aui-order-door">目的地：'+data.rows[i].destinationtext  +'</p>'+
                                                        '  </div>';
                            }
                            var s2 = document.getElementById("s2");
                            s2.innerHTML=hhh;
                        },

                        });

            }
            else if(index==3){

                $.ajax({
                        type: "POST",
                        url: "http://xycrgl.cug.edu.cn/reserve.php/reserve/myindex?typee="+"不通过",
                        contentType: "application/json; charset=utf-8",

                        success: function(data){
                            console.log(data.rows);
                            var hhh="";
                            if(data.rows.length==0){

                            hhh= "<div style='width:100vw;margin-top:20vh;text-align:center;'>暂无申请</div>";

                            }
                            for(var i=0;i<data.rows.length;i++){

                                hhh = hhh +'<div class="aui-order-box">'+
                                    '<a href="http://xycrgl.cug.edu.cn/index/liucheng?zhaji='+data.rows[i].
XTBHtext+'" class="aui-well-item">'+
                                                        '<div class="aui-well-item-bd">'+
                                                        ' <h3>申请人：'+data.rows[i].nametext+'</h3>'+
                                                        '  </div>';
                                                        if(data.rows[i].verifier1text=="待审批"){
                                                            hhh = hhh +' <span class="aui-well-item-fr" style="color:#E6A23C">待审批</span>';
                                                        }
                                                        if(data.rows[i].verifier1text=="审批通过"){
                                                            hhh = hhh +'<span class="aui-well-item-fr" style="color:#67C23A">审批通过</span>';
                                                        }
                                                        if(data.rows[i].verifier1text=="不通过"){
                                                            hhh = hhh +' <span class="aui-well-item-fr" style="color:#F56C6C">不通过</span>';
                                                        }
                                                        if(data.rows[i].verifier1text=="已取消"){
                                                            hhh = hhh +' <span class="aui-well-item-fr">已取消</span>';
                                                        }


                                                        hhh = hhh + '   </a>'+
                                                        ' <p class="aui-order-fl aui-order-time">通行时间：'+data.rows[i].outtimetext  +'--'+data.rows[i].backtimetext+'</p>'+
                                                        '  <p class="aui-order-fl aui-order-address">外出原因：'+data.rows[i].reasontext  +'</p>'+
                                                        '   <p class="aui-order-fl aui-order-door">目的地：'+data.rows[i].destinationtext  +'</p>'+
                                                        '  </div>';
                            }
                            var s3 = document.getElementById("s3");
                            s3.innerHTML=hhh;
                        },

                        });

            }
            else if(index==4){

                $.ajax({
                        type: "POST",
                        url: "http://xycrgl.cug.edu.cn/reserve.php/reserve/myindex?typee="+"已取消",
                        contentType: "application/json; charset=utf-8",

                        success: function(data){
                            console.log(data.rows);
                            var hhh="";
                            if(data.rows.length==0){

                                hhh= "<div style='width:100vw;margin-top:20vh;text-align:center;'>暂无申请</div>";

                            }
                            for(var i=0;i<data.rows.length;i++){

                                hhh = hhh +'<div class="aui-order-box">'+
                                    '<a href="http://xycrgl.cug.edu.cn/index/liucheng?zhaji='+data.rows[i].
XTBHtext+'" class="aui-well-item">'+
                                                        '<div class="aui-well-item-bd">'+
                                                        ' <h3>申请人：'+data.rows[i].nametext+'</h3>'+
                                                        '  </div>';
                                                        if(data.rows[i].verifier1text=="待审批"){
                                                            hhh = hhh +' <span class="aui-well-item-fr" style="color:#E6A23C">待审批</span>';
                                                        }
                                                        if(data.rows[i].verifier1text=="审批通过"){
                                                            hhh = hhh +'<span class="aui-well-item-fr" style="color:#67C23A">审批通过</span>';
                                                        }
                                                        if(data.rows[i].verifier1text=="不通过"){
                                                            hhh = hhh +' <span class="aui-well-item-fr" style="color:#F56C6C">不通过</span>';
                                                        }
                                                        if(data.rows[i].verifier1text=="已取消"){
                                                            hhh = hhh +' <span class="aui-well-item-fr">已取消</span>';
                                                        }


                                                        hhh = hhh + '   </a>'+
                                                        ' <p class="aui-order-fl aui-order-time">通行时间：'+data.rows[i].outtimetext  +'--'+data.rows[i].backtimetext+'</p>'+
                                                        '  <p class="aui-order-fl aui-order-address">外出原因：'+data.rows[i].reasontext  +'</p>'+
                                                        '   <p class="aui-order-fl aui-order-door">目的地：'+data.rows[i].destinationtext  +'</p>'+
                                                        '  </div>';
                            }
                            var s4 = document.getElementById("s4");
                            s4.innerHTML=hhh;
                        },

                        });

            }
            else{
            }
        }
    </script>
</html>
